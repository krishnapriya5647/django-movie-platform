{% extends 'movies/base.html' %}
{% block title %}Search{% endblock %}

{% block content %}
<section class="py-5">
  <div class="container">
    <!-- Header -->
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10">
        <div class="card border-0 shadow-sm rounded-4 mb-4">
          <div class="card-body p-4 text-center">
            <h2 class="h4 mb-2">Search results for <span class="text-primary">“{{ query }}”</span></h2>
            <p class="text-muted mb-0">
              <span class="badge bg-primary-subtle text-primary border border-primary-subtle">
                {{ movies|length }} result{{ movies|length|pluralize }}
              </span>
            </p>
          </div>
        </div>

        <!-- Results -->
        {% if movies %}
          <div class="card border-0 shadow-sm rounded-4">
            <div class="card-body p-3 p-sm-4">
              <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                {% for movie in movies %}
                  <div class="col">
                    <a href="{% url 'movies:movie_detail' movie.pk %}" class="text-decoration-none text-reset">
                      <div class="result-item border rounded-3 overflow-hidden h-100">
                        {% if movie.poster %}
                          <img src="{{ movie.poster.url }}" alt="{{ movie.title }}"
                               class="w-100" style="aspect-ratio: 2/3; object-fit: cover;">
                        {% else %}
                          <div class="bg-light d-flex align-items-center justify-content-center w-100"
                               style="aspect-ratio: 2/3;">
                            <span class="text-muted small">No Poster</span>
                          </div>
                        {% endif %}
                        <div class="p-3">
                          <h3 class="h6 mb-1 text-truncate">{{ movie.title }}</h3>
                          <div class="text-muted small">
                            {% if movie.release_date %}{{ movie.release_date|date:"Y" }}{% endif %}
                            {% if movie.category %} · {{ movie.category }}{% endif %}
                            {% if movie.rating %} · <i class="bi bi-star-fill" style="color:#f49910;"></i>
 {{ movie.rating }}{% endif %}
                          </div>
                        </div>
                      </div>
                    </a>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        {% else %}
          <!-- Empty state -->
         <div class="card border-0 shadow-sm rounded-4">
            <div class="card-body text-center p-5">
              <div class="display-6 mb-2 text-warning">
                <i class="bi bi-search" style="color: #1f6feb;"></i>
              </div>
             <h3 class="h5 mb-2">No movies found</h3>
              <p class="text-muted mb-0">Try a different keyword or check spelling.</p>
            </div>
          </div>

        {% endif %}
      </div>
    </div>
  </div>
</section>

<style>
  body{
  background: linear-gradient(135deg, #f3f1ec, #FFFFFF);
  }
  .bg-primary-subtle{ background:#eef1ff!important; color:#2b3fd6!important; }
  .result-item{ transition:.2s box-shadow ease,.2s transform ease; }
  .result-item:hover{ box-shadow:0 .75rem 1.25rem rgba(0,0,0,.08); transform: translateY(-2px); }
  @supports not (aspect-ratio: 2/3){
    /* Fallback if the browser doesn't support aspect-ratio */
    .result-item img{ width:100%; height: 330px; object-fit: cover; }
  }
</style>
{% endblock %}
