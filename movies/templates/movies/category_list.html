{% extends 'movies/base.html' %}
{% block title %}{{ category.name }} · Movies{% endblock %}

{% block content %}
<section class="py-4">
  <div class="container">
    <!-- Centered wrapper -->
    <div class="row justify-content-center">
      <div class="col-12 col-md-10 col-lg-8">

        <!-- Category header card -->
        <div class="card border-0 shadow-sm rounded-4 mb-4 bg-primary-subtle">
          <div class="card-body text-center p-4">
            <h2 class="h3 mb-2">{{ category.name }}</h2>
            <p class="text-muted mb-0">
              <span class="badge bg-primary-subtle text-primary border border-primary-subtle">
                {{ movies|length }} movie{{ movies|length|pluralize }}
              </span>
            </p>
          </div>
        </div>

        <!-- Responsive movie list -->
        {% if movies %}
          <div class="card border-0  rounded-4 " style="box-shadow: 2px 2px 5px black;">
            <div class="card-body p-3 p-sm-4">
              <div class="row row-cols-1 row-cols-sm-2 g-3">
                {% for movie in movies %}
                  <div class="col">
                    <a href="{% url 'movies:movie_detail' movie.pk %}"
                       class="text-decoration-none">
                      <div class="d-flex align-items-center gap-3 p-3 rounded-3 border hover-shadow"
                           style="transition:.2s box-shadow ease, .2s transform ease;">
                        {% if movie.poster %}
                          <img src="{{ movie.poster.url }}" alt="{{ movie.title }}"
                               class="rounded-3 flex-shrink-0"
                               style="width:72px;height:96px;object-fit:cover;">
                        {% else %}
                          <div class="bg-light rounded-3 d-flex align-items-center justify-content-center flex-shrink-0"
                               style="width:72px;height:96px;">
                            <span class="text-muted small">No Poster</span>
                          </div>
                        {% endif %}
                        <div class="min-w-0">
                          <h3 class="h6 mb-1 text-dark text-truncate">{{ movie.title }}</h3>
                          <div class="text-muted small">
                            {% if movie.release_date %}{{ movie.release_date|date:"Y" }} · {% endif %}
                            {% if movie.rating %}<span class="badge bg-light border border-primary  text-warning align-self-start align-self-md-center"> <i class="bi bi-star-fill me-1"></i> {{ movie.rating }}{% else %}No rating{% endif %}
                          </div>
                        </div>
                      </div>
                    </a>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        {% else %}
          <!-- Empty state -->
          <div class="card border-0 shadow-sm rounded-4">
            <div class="card-body text-center p-5">
              <div class="mb-2"></div>
              <h3 class="h5 mb-2">No movies in this category yet</h3>
              <p class="text-muted mb-0">Check back later or explore other categories.</p>
            </div>
          </div>
        {% endif %}

      </div>
    </div>
  </div>
</section>

<style>
  /* subtle hover for list items */
  .hover-shadow:hover { box-shadow: 0 0.5rem 1rem rgba(0,0,0,.08); transform: translateY(-2px); }
</style>
{% endblock %}
